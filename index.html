<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--favicon-->
    <link
      rel="icon"
      href="assets/images/favicon-32x32-bmkg.png"
      type="image/png"
    />
    <!--plugins-->
    <link href="assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
    <link
      href="assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css"
      rel="stylesheet"
    />
    <link
      href="assets/plugins/metismenu/css/metisMenu.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/plugins/datatable/css/dataTables.bootstrap5.min.css"
      rel="stylesheet"
    />
    <!-- loader-->
    <link href="assets/css/pace.min.css" rel="stylesheet" />
    <script src="assets/js/pace.min.js"></script>
    <!-- Bootstrap CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/bootstrap-extended.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link href="assets/css/app.css" rel="stylesheet" />
    <link href="assets/css/icons.css" rel="stylesheet" />
    <!-- Theme Style CSS -->
    <link rel="stylesheet" href="assets/css/dark-theme.css" />
    <link rel="stylesheet" href="assets/css/semi-dark.css" />
    <link rel="stylesheet" href="assets/css/header-colors.css" />
    <title>PPSDM MKG</title>
  </head>

  <body>
    <!--wrapper-->
    <div class="wrapper">
      <!--sidebar wrapper -->
      <div class="sidebar-wrapper" data-simplebar="true">
        <div class="sidebar-header">
          <div>
            <img
              src="assets/images/logo-icon-bmkg.png"
              class="logo-icon"
              alt="logo icon"
            />
          </div>
          <div></div>
          <div class="toggle-icon ms-auto">
            <i class="bx bx-arrow-back"></i>
          </div>
        </div>
        <!--navigation-->
        <ul class="metismenu" id="menu">
          <li>
            <a href="javascript:;" class="has-arrow">
              <div class="parent-icon"><i class="bx bx-book"></i></div>
              <div class="menu-title">PELATIHAN</div>
            </a>
            <ul>
              <li>
                <a href="javascript:;" class="filter-kategori" data-kategori="1"
                  ><i class="bx bx-radio-circle"></i>Pelatihan Teknis</a
                >
              </li>
              <li>
                <a href="javascript:;" class="filter-kategori" data-kategori="4"
                  ><i class="bx bx-radio-circle"></i>Pelatihan Fungsional</a
                >
              </li>
              <li>
                <a href="javascript:;" class="filter-kategori" data-kategori="2"
                  ><i class="bx bx-radio-circle"></i>Pelatihan Kepemimpinan</a
                >
              </li>
              <li>
                <a href="javascript:;" class="filter-kategori" data-kategori="3"
                  ><i class="bx bx-radio-circle"></i>Pelatihan Dasar CPNS</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Inhouse Training</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Rekapitulasi Jumlah
                  Peserta</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a href="javascript:;" class="has-arrow">
              <div class="parent-icon"><i class="bx bx-check-circle"></i></div>
              <div class="menu-title">PENJAMINAN MUTU</div>
            </a>
            <ul>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Monitoring Diklat</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Pasca Diklat</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Evaluasi Latsar Online</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Evaluasi PKA Online</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Evaluasi PKP Online</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Evaluasi Teknis/Fungsional
                  Online</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Evaluasi Klasikal</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>BA Penjaminan Mutu</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Lap Penjaminan Mutu</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Pencarian Data Hasil
                  Pelatihan</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Laporan Kegiatan
                  Pelatihan</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a href="javascript:;" class="has-arrow">
              <div class="parent-icon"><i class="bx bx-group"></i></div>
              <div class="menu-title">SEMINAR/WORKSHOP</div>
            </a>
            <ul>
              <li>
                <a href="javascript:;"><i class="bx bx-radio-circle"></i>OGD</a>
              </li>
              <li>
                <a href="javascript:;"><i class="bx bx-radio-circle"></i>FGD</a>
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Seminar/Workshop
                  Internal</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Seminar/Workshop
                  Eksternal</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Umum</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a href="javascript:;" class="has-arrow">
              <div class="parent-icon"><i class="bx bx-shield-alt-2"></i></div>
              <div class="menu-title">MANAJEMEN RESIKO</div>
            </a>
            <ul>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Menejemen Resiko</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a href="javascript:;" class="has-arrow">
              <div class="parent-icon"><i class="bx bx-file-blank"></i></div>
              <div class="menu-title">MODUL-SOP</div>
            </a>
            <ul>
              <li>
                <a href="javascript:;"><i class="bx bx-radio-circle"></i>SOP</a>
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Modul</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a href="javascript:;" class="has-arrow">
              <div class="parent-icon"><i class="bx bx-user"></i></div>
              <div class="menu-title">DATA PEGAWAI</div>
            </a>
            <ul>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Pegawai BMKG</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Pegawai PPSDM</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Pegawai Non BMKG</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Cari Peserta Pelatihan</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Cari Pengajar</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Cari Panitia</a
                >
              </li>
              <li>
                <a href="javascript:;"
                  ><i class="bx bx-radio-circle"></i>Data Widyaiswara</a
                >
              </li>
            </ul>
          </li>
        </ul>
        <!--end navigation-->
      </div>
      <!--end sidebar wrapper -->
      <!--start header -->
      <header>
        <div class="topbar d-flex align-items-center">
          <nav class="navbar navbar-expand gap-3">
            <div class="mobile-toggle-menu"><i class="bx bx-menu"></i></div>

            <div class="top-menu ms-auto">
              <ul class="navbar-nav align-items-center gap-1">
                <li class="nav-item dark-mode d-none d-sm-flex">
                  <a class="nav-link dark-mode-icon" href="javascript:;"
                    ><i class="bx bx-moon"></i>
                  </a>
                </li>
              </ul>
            </div>
            <div class="user-box dropdown px-3">
              <a
                class="d-flex align-items-center nav-link dropdown-toggle gap-3 dropdown-toggle-nocaret"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <img
                  src="assets/images/avatars/avatar-2.png"
                  class="user-img"
                  alt="user avatar"
                />
                <div class="user-info">
                  <p class="user-name mb-0">Dwi Indra P</p>
                  <p class="designattion mb-0">Admin</p>
                </div>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a
                    class="dropdown-item d-flex align-items-center"
                    href="javascript:;"
                    ><i class="bx bx-user fs-5"></i><span>Profile</span></a
                  >
                </li>
                <li>
                  <a
                    class="dropdown-item d-flex align-items-center"
                    href="javascript:;"
                    ><i class="bx bx-cog fs-5"></i><span>Settings</span></a
                  >
                </li>

                <li>
                  <div class="dropdown-divider mb-0"></div>
                </li>
                <li>
                  <a
                    class="dropdown-item d-flex align-items-center"
                    href="javascript:;"
                    ><i class="bx bx-log-out-circle"></i><span>Logout</span></a
                  >
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </header>
      <!--end header -->
      <!--start page wrapper -->
      <div class="page-wrapper">
        <div class="page-content">
          <!--breadcrumb-->
          <div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
            <div class="ps-3">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0 p-0"></ol>
              </nav>
            </div>
            <div class="ms-auto">
              <div class="btn-group">
                <div
                  class="dropdown-menu dropdown-menu-right dropdown-menu-lg-end"
                >
                  <a class="dropdown-item" href="javascript:;">Action</a>
                  <a class="dropdown-item" href="javascript:;"
                    >Another action</a
                  >
                  <a class="dropdown-item" href="javascript:;"
                    >Something else here</a
                  >
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="javascript:;"
                    >Separated link</a
                  >
                </div>
              </div>
            </div>
          </div>
          <!--end breadcrumb-->
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="mb-0 text-uppercase">Jadwal Diklat</h6>
            <div>
              <button
                type="button"
                class="btn btn-primary btn-sm me-2"
                id="btnTambahData"
              >
                <i class="bx bx-plus"></i> Tambah Data
              </button>
              <button
                type="button"
                class="btn btn-success btn-sm"
                id="btnUnduhData"
              >
                <i class="bx bx-download"></i> Unduh Data
              </button>
            </div>
          </div>
          <hr />
          <div class="card">
            <div class="card-body">
              <div class="table-responsive">
                <table
                  id="jadwalTable"
                  class="table table-striped table-bordered"
                  style="width: 100%"
                >
                  <thead>
                    <tr>
                      <th>No.</th>
                      <th>Kegiatan</th>
                      <th>JP</th>
                      <th>Waktu</th>
                      <th>Panitia</th>
                      <th>Peserta</th>
                      <th>Aksi</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--end page wrapper -->
      <!--start overlay-->
      <div class="overlay toggle-icon"></div>
      <!--end overlay-->
      <!--Start Back To Top Button-->
      <a href="javaScript:;" class="back-to-top"
        ><i class="bx bxs-up-arrow-alt"></i
      ></a>
      <!--End Back To Top Button-->
      <footer class="page-footer">
        <p class="mb-0">PPSDM MKG - Copyright Â© 2025. All right reserved.</p>
      </footer>
    </div>
    <!--end wrapper-->

    <!-- Modal Profil Kegiatan Pelatihan (untuk klik nama kegiatan - menampilkan kurikulum) -->
    <div
      class="modal fade"
      id="modalKegiatan"
      tabindex="-1"
      aria-labelledby="modalKegiatanLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalKegiatanLabel">
              Profil Kegiatan Pelatihan
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" style="padding: 1.5rem">
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Kegiatan</strong>
              </div>
              <div class="col-md-9" id="modalKegiatanNama">-</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Deskripsi</strong>
              </div>
              <div class="col-md-9" id="modalKegiatanDeskripsi">
                <p>-</p>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Tujuan Pelatihan</strong>
              </div>
              <div class="col-md-9" id="modalKegiatanTujuan">
                <p>-</p>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Panitia</strong>
              </div>
              <div class="col-md-9" id="modalKegiatanPanitia">-</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Jumlah Peserta</strong>
              </div>
              <div class="col-md-9" id="modalKegiatanJmlPeserta">-</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Tanggal Kegiatan</strong>
              </div>
              <div class="col-md-9" id="modalKegiatanTanggal">-</div>
            </div>
            <div class="row mb-3 mt-4">
              <div class="col-12">
                <h6 class="mb-3">Kurikulum</h6>
                <div class="table-responsive">
                  <table
                    id="kurikulumTable"
                    class="table table-striped table-bordered"
                    style="width: 100%"
                  >
                    <thead>
                      <tr>
                        <th>No.</th>
                        <th>Mata Pelatihan</th>
                        <th>Widyaiswara/Narasumber</th>
                        <th>Agenda</th>
                        <th>Kelompok</th>
                        <th>Tgl Kegiatan</th>
                        <th>JP</th>
                        <th>Aksi</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Tutup
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal Profil Kegiatan Pelatihan -->

    <!-- Modal Profil Kegiatan Pelatihan (untuk klik icon peserta - menampilkan peserta) -->
    <div
      class="modal fade"
      id="modalPeserta"
      tabindex="-1"
      aria-labelledby="modalPesertaLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalPesertaLabel">
              Profil Kegiatan Pelatihan
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" style="padding: 1.5rem">
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Kegiatan</strong>
              </div>
              <div class="col-md-9" id="modalPesertaNama">-</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Deskripsi</strong>
              </div>
              <div class="col-md-9" id="modalPesertaDeskripsi">
                <p>-</p>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Tujuan Pelatihan</strong>
              </div>
              <div class="col-md-9" id="modalPesertaTujuan">
                <p>-</p>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Panitia</strong>
              </div>
              <div class="col-md-9" id="modalPesertaPanitia">-</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Jumlah Peserta</strong>
              </div>
              <div class="col-md-9" id="modalPesertaJmlPeserta">-</div>
            </div>
            <div class="row mb-3">
              <div class="col-md-3">
                <strong>Tanggal Kegiatan</strong>
              </div>
              <div class="col-md-9" id="modalPesertaTanggal">-</div>
            </div>
            <div class="row mb-3 mt-4">
              <div class="col-12">
                <h6 class="mb-3">Peserta</h6>
                <div class="table-responsive">
                  <table
                    id="pesertaTable"
                    class="table table-striped table-bordered"
                    style="width: 100%"
                  >
                    <thead>
                      <tr>
                        <th>No.</th>
                        <th>Nama</th>
                        <th>NIP</th>
                        <th>Peringkat</th>
                        <th>Kel</th>
                        <th>Unit Kerja</th>
                        <th>Mentor</th>
                        <th>Foto</th>
                        <th>Berkas</th>
                        <th>Sertifikat</th>
                        <th>Aksi</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Tutup
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal Profil Kegiatan Pelatihan (Peserta) -->

    <!-- Modal Update Jadwal Diklat -->
    <div
      class="modal fade"
      id="modalUpdateJadwal"
      tabindex="-1"
      aria-labelledby="modalUpdateJadwalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalUpdateJadwalLabel">
              Update Jadwal Diklat
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="formUpdateJadwal">
              <input type="hidden" id="updateId" name="id" />
              <div class="mb-3">
                <label for="updateNamaDiklat" class="form-label"
                  >Nama Diklat <span class="text-danger">*</span></label
                >
                <input
                  type="text"
                  class="form-control"
                  id="updateNamaDiklat"
                  name="Nama_diklat"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="updateDeskripsi" class="form-label"
                  >Deskripsi</label
                >
                <textarea
                  class="form-control"
                  id="updateDeskripsi"
                  name="deskripsi"
                  rows="3"
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="updateTujuan" class="form-label"
                  >Tujuan Pelatihan</label
                >
                <textarea
                  class="form-control"
                  id="updateTujuan"
                  name="tujuan"
                  rows="3"
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="updateJP" class="form-label">JP</label>
                <input
                  type="text"
                  class="form-control"
                  id="updateJP"
                  name="JP"
                />
              </div>
              <div class="mb-3">
                <label for="updatePanitia" class="form-label">Panitia</label>
                <textarea
                  class="form-control"
                  id="updatePanitia"
                  name="panitia"
                  rows="3"
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="updateJmlPeserta" class="form-label"
                  >Jumlah Peserta</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="updateJmlPeserta"
                  name="jml_peserta"
                  min="0"
                />
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="updateWaktuAwal" class="form-label"
                    >Waktu Awal</label
                  >
                  <input
                    type="datetime-local"
                    class="form-control"
                    id="updateWaktuAwal"
                    name="waktu_awal"
                  />
                </div>
                <div class="col-md-6 mb-3">
                  <label for="updateWaktuAkhir" class="form-label"
                    >Waktu Akhir</label
                  >
                  <input
                    type="datetime-local"
                    class="form-control"
                    id="updateWaktuAkhir"
                    name="waktu_akhir"
                  />
                </div>
              </div>
              <div class="mb-3">
                <label for="updateKategori" class="form-label"
                  >Kategori Diklat</label
                >
                <select
                  class="form-select"
                  id="updateKategori"
                  name="kategori_diklat"
                >
                  <option value="1">Pelatihan Teknis</option>
                  <option value="2">Pelatihan Kepemimpinan</option>
                  <option value="3">Pelatihan Dasar CPNS</option>
                  <option value="4">Pelatihan Fungsional</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Batal
            </button>
            <button type="button" class="btn btn-primary" id="btnSaveUpdate">
              Simpan Perubahan
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal Update Jadwal Diklat -->

    <!-- Modal Unduh Data -->
    <div
      class="modal fade"
      id="modalUnduhData"
      tabindex="-1"
      aria-labelledby="modalUnduhDataLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalUnduhDataLabel">
              Format Unduh Data
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p class="mb-3">Pilih format untuk mengunduh data:</p>
            <div class="d-grid gap-2">
              <button
                type="button"
                class="btn btn-outline-primary btn-unduh-format"
                data-format="csv"
              >
                <i class="bx bx-file"></i> Unduh CSV
              </button>
              <button
                type="button"
                class="btn btn-outline-success btn-unduh-format"
                data-format="excel"
              >
                <i class="bx bx-file"></i> Unduh Excel
              </button>
              <button
                type="button"
                class="btn btn-outline-danger btn-unduh-format"
                data-format="pdf"
              >
                <i class="bx bx-file"></i> Unduh PDF
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary btn-unduh-format"
                data-format="print"
              >
                <i class="bx bx-printer"></i> Print
              </button>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Tutup
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal Unduh Data -->

    <!-- Hidden div for print/PDF -->
    <div id="printArea" style="display: none"></div>

    <!-- Bootstrap JS -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <!--plugins-->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/plugins/simplebar/js/simplebar.min.js"></script>
    <script src="assets/plugins/metismenu/js/metisMenu.min.js"></script>
    <script src="assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
    <script src="assets/plugins/datatable/js/jquery.dataTables.min.js"></script>
    <script src="assets/plugins/datatable/js/dataTables.bootstrap5.min.js"></script>
    <script>
      $(document).ready(function () {
        // Set default kategori filter (Pelatihan Teknis = 1)
        var currentKategori = 1;

        // Set active state for default filter
        $('.filter-kategori[data-kategori="1"]').addClass("mm-active");

        // Function to load data with kategori filter
        function loadJadwalData(kategori) {
          // Remove active state from all filter links
          $(".filter-kategori").removeClass("mm-active");
          // Add active state to selected filter
          $('.filter-kategori[data-kategori="' + kategori + '"]').addClass(
            "mm-active"
          );

          // Destroy existing table if exists
          if ($.fn.DataTable.isDataTable("#jadwalTable")) {
            $("#jadwalTable").DataTable().destroy();
          }

          // Load data from API and initialize DataTable
          $.ajax({
            url: "api/get_jadwal_diklat.php?kategori=" + kategori,
            type: "GET",
            dataType: "json",
            success: function (response) {
              // Check if response has error
              if (response.error) {
                alert("Error: " + response.message);
                response.data = [];
              }

              var table = $("#jadwalTable").DataTable({
                data: response.data || [],
                columns: [
                  { data: "no" },
                  {
                    data: "kegiatan",
                    render: function (data, type, row) {
                      return (
                        '<a href="javascript:;" class="kegiatan-link text-primary" data-id="' +
                        row.id +
                        '" style="cursor: pointer; text-decoration: underline;">' +
                        data +
                        "</a>"
                      );
                    },
                  },
                  { data: "jp" },
                  { data: "waktu" },
                  { data: "panitia" },
                  {
                    data: "id",
                    render: function (data, type, row) {
                      return (
                        '<a href="javascript:;" class="peserta-link" data-id="' +
                        data +
                        '" style="cursor: pointer; font-size: 24px;"><i class="bx bx-group text-primary"></i></a>'
                      );
                    },
                    orderable: false,
                    searchable: false,
                  },
                  {
                    data: "id",
                    render: function (data, type, row) {
                      return (
                        '<button class="btn btn-primary btn-sm update-jadwal-btn me-1" data-id="' +
                        data +
                        '"><i class="bx bx-edit"></i> Update</button>' +
                        '<button class="btn btn-danger btn-sm delete-btn" data-id="' +
                        data +
                        '"><i class="bx bx-trash"></i> Hapus</button>'
                      );
                    },
                    orderable: false,
                    searchable: false,
                  },
                ],
                language: {
                  url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                },
                order: [[0, "asc"]],
                pageLength: 10,
              });
            },
            error: function (xhr, status, error) {
              var errorMessage = "Gagal memuat data dari server";

              if (xhr.responseText) {
                try {
                  var errorData = JSON.parse(xhr.responseText);
                  if (errorData.message) {
                    errorMessage = errorData.message;
                  }
                } catch (e) {
                  errorMessage = "Error: " + xhr.status + " - " + error;
                }
              }

              alert(errorMessage);

              // Initialize empty table if error
              $("#jadwalTable").DataTable({
                data: [],
                columns: [
                  { data: "no" },
                  { data: "kegiatan" },
                  { data: "jp" },
                  { data: "waktu" },
                  { data: "panitia" },
                  {
                    data: "id",
                    render: function (data, type, row) {
                      return (
                        '<a href="javascript:;" class="peserta-link" data-id="' +
                        data +
                        '" style="cursor: pointer; font-size: 24px;"><i class="bx bx-group text-primary"></i></a>'
                      );
                    },
                    orderable: false,
                    searchable: false,
                  },
                  {
                    data: "id",
                    render: function (data, type, row) {
                      return (
                        '<button class="btn btn-primary btn-sm update-jadwal-btn me-1" data-id="' +
                        data +
                        '"><i class="bx bx-edit"></i> Update</button>' +
                        '<button class="btn btn-danger btn-sm delete-btn" data-id="' +
                        data +
                        '"><i class="bx bx-trash"></i> Hapus</button>'
                      );
                    },
                    orderable: false,
                    searchable: false,
                  },
                ],
                language: {
                  url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                },
              });
            },
          });
        }

        // Handle kegiatan link click (moved outside)
        $(document).on("click", ".kegiatan-link", function () {
          var id = $(this).data("id");

          // Load detail kegiatan
          $.ajax({
            url: "api/get_detail_diklat.php?id=" + id,
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.success && response.data) {
                var data = response.data;

                // Populate modal
                $("#modalKegiatan")
                  .find("#modalKegiatanNama")
                  .text(data.kegiatan);
                $("#modalKegiatan")
                  .find("#modalKegiatanDeskripsi")
                  .html(data.deskripsi);

                // Format tujuan dengan <p> tags
                var tujuan = data.tujuan || "-";
                var tujuanFormatted = "";
                if (tujuan !== "-") {
                  var tujuanLines = tujuan.split("\n");
                  tujuanFormatted = tujuanLines
                    .map(function (line) {
                      return line.trim() ? "<p>" + line.trim() + "</p>" : "";
                    })
                    .join("");
                } else {
                  tujuanFormatted = "<p>-</p>";
                }
                $("#modalKegiatan")
                  .find("#modalKegiatanTujuan")
                  .html(tujuanFormatted);

                $("#modalKegiatan")
                  .find("#modalKegiatanPanitia")
                  .html(data.panitia);
                $("#modalKegiatan")
                  .find("#modalKegiatanJmlPeserta")
                  .text(data.jml_peserta + " orang");
                $("#modalKegiatan")
                  .find("#modalKegiatanTanggal")
                  .text(data.tanggal_kegiatan);

                // Load kurikulum data only (for modalKegiatan)
                loadKurikulumData(id);

                // Show modal
                $("#modalKegiatan").modal("show");
              } else {
                alert("Gagal memuat detail kegiatan");
              }
            },
            error: function () {
              alert("Terjadi kesalahan saat memuat detail kegiatan");
            },
          });
        });

        // Function to load peserta data
        function loadPesertaData(idDiklat, modalId) {
          // Destroy existing DataTable if exists
          if ($.fn.DataTable.isDataTable("#pesertaTable")) {
            $("#pesertaTable").DataTable().destroy();
          }

          $.ajax({
            url: "api/get_peserta_diklat.php?id_diklat=" + idDiklat,
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.success && response.data) {
                var pesertaTable = $("#pesertaTable").DataTable({
                  data: response.data || [],
                  columns: [
                    { data: "no" },
                    { data: "nama_peserta" },
                    { data: "NIP" },
                    { data: "peringkat" },
                    { data: "kelompok" },
                    { data: "unit_kerja" },
                    { data: "mentor" },
                    {
                      data: "image",
                      render: function (data, type, row) {
                        if (data && data !== "-") {
                          return (
                            '<img src="' +
                            data +
                            '" alt="Foto" style="width: 50px; height: 50px; object-fit: cover;" />'
                          );
                        }
                        return "-";
                      },
                    },
                    {
                      data: "file",
                      render: function (data, type, row) {
                        if (data && data !== "-") {
                          return (
                            '<a href="' +
                            data +
                            '" target="_blank" class="btn btn-sm btn-info"><i class="bx bx-download"></i> Download</a>'
                          );
                        }
                        return "-";
                      },
                    },
                    { data: "no_sertifikat" },
                    {
                      data: null,
                      render: function (data, type, row) {
                        return (
                          '<button class="btn btn-primary btn-sm update-peserta-btn" data-no-urut="' +
                          (row.no_urut || row.no) +
                          '" data-id="' +
                          (row.id || row.no_urut || row.no) +
                          '" style="margin-right: 5px;"><i class="bx bx-edit"></i> Update</button>' +
                          '<button class="btn btn-danger btn-sm delete-peserta-btn" data-no-urut="' +
                          (row.no_urut || row.no) +
                          '" data-id="' +
                          (row.id || row.no_urut || row.no) +
                          '"><i class="bx bx-trash"></i> Hapus</button>'
                        );
                      },
                      orderable: false,
                      searchable: false,
                    },
                  ],
                  language: {
                    url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                  },
                  order: [[0, "asc"]],
                  pageLength: 10,
                  scrollX: true,
                });

                // Handle update peserta button click
                $(document).off("click", ".update-peserta-btn");
                $(document).on("click", ".update-peserta-btn", function () {
                  var noUrut = $(this).data("no-urut");
                  var id = $(this).data("id");
                  alert(
                    "Update peserta dengan No. Urut: " +
                      noUrut +
                      " (ID: " +
                      id +
                      ")"
                  );
                  // TODO: Implement update functionality
                });

                // Handle delete peserta button click
                $(document).off("click", ".delete-peserta-btn");
                $(document).on("click", ".delete-peserta-btn", function () {
                  var noUrut = $(this).data("no-urut");
                  var id = $(this).data("id");
                  var row = $(this).closest("tr");

                  if (
                    confirm("Apakah Anda yakin ingin menghapus peserta ini?")
                  ) {
                    // TODO: Implement delete functionality via API
                    // For now, just remove from table
                    pesertaTable.row(row).remove().draw();
                    alert("Peserta berhasil dihapus");
                  }
                });
              } else {
                // Initialize empty table if no data
                $("#pesertaTable").DataTable({
                  data: [],
                  language: {
                    url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                  },
                });
              }
            },
            error: function (xhr, status, error) {
              console.error("Error loading peserta:", xhr.responseText);

              // Initialize empty table on error
              $("#pesertaTable").DataTable({
                data: [],
                language: {
                  url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                },
              });

              // Show error message if available
              if (xhr.responseText) {
                try {
                  var errorData = JSON.parse(xhr.responseText);
                  if (errorData.message) {
                    console.error("API Error:", errorData.message);
                  }
                } catch (e) {
                  console.error("Error parsing response:", xhr.responseText);
                }
              }
            },
          });
        }

        // Handle peserta link click (icon peserta)
        $(document).on("click", ".peserta-link", function () {
          var id = $(this).data("id");

          // Load detail kegiatan
          $.ajax({
            url: "api/get_detail_diklat.php?id=" + id,
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.success && response.data) {
                var data = response.data;

                // Populate modalPeserta
                $("#modalPeserta")
                  .find("#modalPesertaNama")
                  .text(data.kegiatan);
                $("#modalPeserta")
                  .find("#modalPesertaDeskripsi")
                  .html(data.deskripsi);

                // Format tujuan dengan <p> tags
                var tujuan = data.tujuan || "-";
                var tujuanFormatted = "";
                if (tujuan !== "-") {
                  var tujuanLines = tujuan.split("\n");
                  tujuanFormatted = tujuanLines
                    .map(function (line) {
                      return line.trim() ? "<p>" + line.trim() + "</p>" : "";
                    })
                    .join("");
                } else {
                  tujuanFormatted = "<p>-</p>";
                }
                $("#modalPeserta")
                  .find("#modalPesertaTujuan")
                  .html(tujuanFormatted);

                $("#modalPeserta")
                  .find("#modalPesertaPanitia")
                  .html(data.panitia);
                $("#modalPeserta")
                  .find("#modalPesertaJmlPeserta")
                  .text(data.jml_peserta + " orang");
                $("#modalPeserta")
                  .find("#modalPesertaTanggal")
                  .text(data.tanggal_kegiatan);

                // Load peserta data only (for modalPeserta)
                loadPesertaData(id, "modalPeserta");

                // Show modal
                $("#modalPeserta").modal("show");
              } else {
                alert("Gagal memuat detail kegiatan");
              }
            },
            error: function () {
              alert("Terjadi kesalahan saat memuat detail kegiatan");
            },
          });
        });

        // Handle filter kategori click (moved outside)
        $(document).on("click", ".filter-kategori", function (e) {
          e.preventDefault();
          var kategori = $(this).data("kategori");
          if (kategori) {
            currentKategori = kategori;
            loadJadwalData(kategori);
          }
        });

        // Initial load with default kategori
        loadJadwalData(currentKategori);

        // Handle update jadwal button click
        $(document).on("click", ".update-jadwal-btn", function () {
          var id = $(this).data("id");

          // Load data untuk diupdate
          $.ajax({
            url: "api/get_detail_diklat.php?id=" + id,
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.success && response.data) {
                // Load full data untuk form
                $.ajax({
                  url: "api/get_jadwal_diklat_raw.php?kategori=0",
                  type: "GET",
                  dataType: "json",
                  success: function (allData) {
                    var jadwalData = null;
                    if (allData.success && allData.data) {
                      jadwalData = allData.data.find(function (item) {
                        return item.id == id;
                      });
                    }

                    if (jadwalData) {
                      // Populate form
                      $("#updateId").val(jadwalData.id);
                      $("#updateNamaDiklat").val(jadwalData.Nama_diklat);
                      $("#updateJP").val(jadwalData.JP || "");
                      $("#updatePanitia").val(
                        jadwalData.panitia
                          ? jadwalData.panitia.replace(/<br\s*\/?>/gi, "\n")
                          : ""
                      );
                      $("#updateKategori").val(jadwalData.kategori_diklat || 1);

                      // Format datetime untuk input
                      if (
                        jadwalData.waktu_awal &&
                        jadwalData.waktu_awal !== "-"
                      ) {
                        var waktuAwal = new Date(
                          jadwalData.waktu_awal.replace(" ", "T")
                        );
                        $("#updateWaktuAwal").val(
                          waktuAwal.toISOString().slice(0, 16)
                        );
                      }
                      if (
                        jadwalData.waktu_akhir &&
                        jadwalData.waktu_akhir !== "-"
                      ) {
                        var waktuAkhir = new Date(
                          jadwalData.waktu_akhir.replace(" ", "T")
                        );
                        $("#updateWaktuAkhir").val(
                          waktuAkhir.toISOString().slice(0, 16)
                        );
                      }

                      // Load deskripsi dan tujuan dari detail
                      var deskripsi = response.data.deskripsi || "";
                      deskripsi = deskripsi
                        .replace(/<p>/g, "")
                        .replace(/<\/p>/g, "\n");
                      $("#updateDeskripsi").val(deskripsi.trim());

                      var tujuan = response.data.tujuan || "";
                      if (tujuan !== "-") {
                        $("#updateTujuan").val(tujuan);
                      }

                      // Show modal
                      $("#modalUpdateJadwal").modal("show");
                    } else {
                      alert("Data tidak ditemukan");
                    }
                  },
                  error: function () {
                    alert("Gagal memuat data untuk diupdate");
                  },
                });
              } else {
                alert("Gagal memuat detail data");
              }
            },
            error: function () {
              alert("Terjadi kesalahan saat memuat data");
            },
          });
        });

        // Handle save update
        $("#btnSaveUpdate").on("click", function () {
          var formData = {
            id: $("#updateId").val(),
            Nama_diklat: $("#updateNamaDiklat").val(),
            deskripsi: $("#updateDeskripsi").val(),
            tujuan: $("#updateTujuan").val(),
            JP: $("#updateJP").val(),
            panitia: $("#updatePanitia").val(),
            jml_peserta: $("#updateJmlPeserta").val() || 0,
            waktu_awal: $("#updateWaktuAwal").val(),
            waktu_akhir: $("#updateWaktuAkhir").val(),
            kategori_diklat: $("#updateKategori").val(),
          };

          if (!formData.Nama_diklat) {
            alert("Nama Diklat wajib diisi");
            return;
          }

          $.ajax({
            url: "api/update_jadwal_diklat.php",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(formData),
            dataType: "json",
            success: function (response) {
              if (response.success) {
                alert("Data berhasil diupdate");
                $("#modalUpdateJadwal").modal("hide");
                // Reload table
                loadJadwalData(currentKategori);
              } else {
                alert("Gagal mengupdate data: " + response.message);
              }
            },
            error: function () {
              alert("Terjadi kesalahan saat mengupdate data");
            },
          });
        });

        // Handle tambah data button
        $("#btnTambahData").on("click", function () {
          alert("Fitur Tambah Data akan segera tersedia");
          // TODO: Implement tambah data
        });

        // Handle unduh data button
        $("#btnUnduhData").on("click", function () {
          $("#modalUnduhData").modal("show");
        });

        // Handle format unduh
        $(document).on("click", ".btn-unduh-format", function () {
          var format = $(this).data("format");
          $("#modalUnduhData").modal("hide");

          // Get current table data
          var table = $("#jadwalTable").DataTable();
          var data = table.data().toArray();

          if (format === "csv") {
            unduhCSV(data);
          } else if (format === "excel") {
            unduhExcel(data);
          } else if (format === "pdf") {
            unduhPDF(data);
          } else if (format === "print") {
            printData(data);
          }
        });

        // Function to download CSV
        function unduhCSV(data) {
          var csv = "No.,Kegiatan,JP,Waktu,Panitia\n";
          data.forEach(function (row) {
            csv +=
              '"' +
              (row.no || "") +
              '","' +
              (row.kegiatan || "").replace(/"/g, '""') +
              '","' +
              (row.jp || "") +
              '","' +
              (row.waktu || "").replace(/"/g, '""') +
              '","' +
              (row.panitia || "").replace(/"/g, '""') +
              '"\n';
          });

          var blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
          var link = document.createElement("a");
          var url = URL.createObjectURL(blob);
          link.setAttribute("href", url);
          link.setAttribute(
            "download",
            "jadwal_diklat_" + new Date().getTime() + ".csv"
          );
          link.style.visibility = "hidden";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        // Function to download Excel
        function unduhExcel(data) {
          var html =
            '<table border="1"><thead><tr><th>No.</th><th>Kegiatan</th><th>JP</th><th>Waktu</th><th>Panitia</th></tr></thead><tbody>';
          data.forEach(function (row) {
            html +=
              "<tr><td>" +
              (row.no || "") +
              "</td><td>" +
              (row.kegiatan || "") +
              "</td><td>" +
              (row.jp || "") +
              "</td><td>" +
              (row.waktu || "") +
              "</td><td>" +
              (row.panitia || "") +
              "</td></tr>";
          });
          html += "</tbody></table>";

          var blob = new Blob([html], {
            type: "application/vnd.ms-excel",
          });
          var link = document.createElement("a");
          var url = URL.createObjectURL(blob);
          link.setAttribute("href", url);
          link.setAttribute(
            "download",
            "jadwal_diklat_" + new Date().getTime() + ".xls"
          );
          link.style.visibility = "hidden";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }

        // Function to download PDF
        function unduhPDF(data) {
          var printContent = generatePrintContent(data, "Jadwal Diklat");
          var printWindow = window.open("", "_blank");
          printWindow.document.write(printContent);
          printWindow.document.close();
          printWindow.onload = function () {
            printWindow.print();
          };
        }

        // Function to print
        function printData(data) {
          var printContent = generatePrintContent(data, "Jadwal Diklat");
          var printWindow = window.open("", "_blank");
          printWindow.document.write(printContent);
          printWindow.document.close();
          printWindow.onload = function () {
            printWindow.print();
          };
        }

        // Function to generate print content (A4 size)
        function generatePrintContent(data, title) {
          var html =
            '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>' +
            title +
            "</title><style>@page { size: A4; margin: 1cm; } body { font-family: Arial, sans-serif; font-size: 10pt; } table { width: 100%; border-collapse: collapse; margin-top: 10px; } th, td { border: 1px solid #000; padding: 6px; text-align: left; } th { background-color: #f0f0f0; font-weight: bold; } .header { text-align: center; margin-bottom: 20px; } .header h2 { margin: 0; }</style></head><body>";
          html +=
            '<div class="header"><h2>' +
            title +
            "</h2><p>Tanggal: " +
            new Date().toLocaleDateString("id-ID") +
            "</p></div>";
          html +=
            '<table><thead><tr><th style="width: 5%;">No.</th><th style="width: 35%;">Kegiatan</th><th style="width: 10%;">JP</th><th style="width: 25%;">Waktu</th><th style="width: 25%;">Panitia</th></tr></thead><tbody>';
          data.forEach(function (row) {
            html +=
              "<tr><td>" +
              (row.no || "") +
              "</td><td>" +
              (row.kegiatan || "") +
              "</td><td>" +
              (row.jp || "") +
              "</td><td>" +
              (row.waktu || "") +
              "</td><td>" +
              (row.panitia || "").replace(/<br\s*\/?>/gi, ", ") +
              "</td></tr>";
          });
          html += "</tbody></table></body></html>";
          return html;
        }

        // Function to load kurikulum data
        function loadKurikulumData(idDiklat) {
          // Destroy existing DataTable if exists
          if ($.fn.DataTable.isDataTable("#kurikulumTable")) {
            $("#kurikulumTable").DataTable().destroy();
          }

          $.ajax({
            url: "api/get_kurikulum_diklat.php?id_diklat=" + idDiklat,
            type: "GET",
            dataType: "json",
            success: function (response) {
              if (response.success && response.data) {
                var kurikulumTable = $("#kurikulumTable").DataTable({
                  data: response.data || [],
                  columns: [
                    { data: "no" },
                    { data: "mata_diklat" },
                    { data: "widyaiswara" },
                    { data: "agenda" },
                    { data: "kelompok" },
                    { data: "tgl_kegiatan" },
                    { data: "jp" },
                    {
                      data: null,
                      render: function (data, type, row) {
                        return (
                          '<button class="btn btn-primary btn-sm update-kurikulum-btn" data-id="' +
                          (row.id || row.no) +
                          '" style="margin-right: 5px;"><i class="bx bx-edit"></i> Update</button>' +
                          '<button class="btn btn-danger btn-sm delete-kurikulum-btn" data-id="' +
                          (row.id || row.no) +
                          '"><i class="bx bx-trash"></i> Hapus</button>'
                        );
                      },
                      orderable: false,
                      searchable: false,
                    },
                  ],
                  language: {
                    url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                  },
                  order: [[0, "asc"]],
                  pageLength: 10,
                  scrollX: true,
                });

                // Handle update kurikulum button click
                $(document).off("click", ".update-kurikulum-btn");
                $(document).on("click", ".update-kurikulum-btn", function () {
                  var id = $(this).data("id");
                  alert("Update kurikulum dengan ID: " + id);
                  // TODO: Implement update functionality
                });

                // Handle delete kurikulum button click
                $(document).off("click", ".delete-kurikulum-btn");
                $(document).on("click", ".delete-kurikulum-btn", function () {
                  var id = $(this).data("id");
                  var row = $(this).closest("tr");

                  if (
                    confirm("Apakah Anda yakin ingin menghapus kurikulum ini?")
                  ) {
                    // TODO: Implement delete functionality via API
                    // For now, just remove from table
                    kurikulumTable.row(row).remove().draw();
                    alert("Kurikulum berhasil dihapus");
                  }
                });
              } else {
                // Initialize empty table if no data
                $("#kurikulumTable").DataTable({
                  data: [],
                  language: {
                    url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                  },
                });
              }
            },
            error: function (xhr, status, error) {
              console.error("Error loading kurikulum:", xhr.responseText);

              // Initialize empty table on error
              $("#kurikulumTable").DataTable({
                data: [],
                language: {
                  url: "//cdn.datatables.net/plug-ins/1.13.7/i18n/id.json",
                },
              });

              // Show error message if available
              if (xhr.responseText) {
                try {
                  var errorData = JSON.parse(xhr.responseText);
                  if (errorData.message) {
                    console.error("API Error:", errorData.message);
                  }
                } catch (e) {
                  console.error("Error parsing response:", xhr.responseText);
                }
              }
            },
          });
        }

        // Handle delete button click (moved outside)
        $(document).on("click", ".delete-btn", function () {
          var id = $(this).data("id");
          var row = $(this).closest("tr");
          var table = $("#jadwalTable").DataTable();

          if (confirm("Apakah Anda yakin ingin menghapus data ini?")) {
            $.ajax({
              url: "api/delete_jadwal_diklat.php",
              type: "POST",
              contentType: "application/json",
              data: JSON.stringify({ id: id }),
              dataType: "json",
              success: function (response) {
                if (response.success) {
                  table.row(row).remove().draw();
                  alert("Data berhasil dihapus");
                  // Reload table with current filter
                  loadJadwalData(currentKategori);
                } else {
                  alert("Gagal menghapus data: " + response.message);
                }
              },
              error: function () {
                alert("Terjadi kesalahan saat menghapus data");
              },
            });
          }
        });
      });
    </script>
    <!--app JS-->
    <script src="assets/js/app.js"></script>
    <script>
      // Ensure MetisMenu is initialized after all scripts are loaded
      $(window).on("load", function () {
        // Re-initialize MetisMenu to ensure it works
        if (typeof $.fn.metisMenu !== "undefined" && $("#menu").length) {
          $("#menu").metisMenu("dispose"); // Dispose existing instance if any
          $("#menu").metisMenu();
        }
      });

      // Fix Dark Mode Toggle
      $(document).ready(function () {
        // Remove any existing handlers from app.js to avoid conflicts
        $(".dark-mode, .dark-mode-icon").off("click");

        // Add new handler with event delegation
        $(document).on("click", ".dark-mode, .dark-mode-icon", function (e) {
          e.preventDefault();
          e.stopPropagation();

          var icon = $(".dark-mode-icon i");
          if (icon.length) {
            var currentClass = icon.attr("class") || "";

            // Toggle between sun and moon
            if (currentClass.indexOf("bx-sun") !== -1) {
              // Switch to moon (light mode)
              icon.attr("class", "bx bx-moon");
              $("html")
                .removeClass("dark-theme semi-dark")
                .addClass("light-theme");
            } else {
              // Switch to sun (dark mode)
              icon.attr("class", "bx bx-sun");
              $("html")
                .removeClass("light-theme semi-dark")
                .addClass("dark-theme");
            }
          }
        });
      });
    </script>
  </body>
</html>
